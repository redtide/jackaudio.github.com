<!DOCTYPE html>
<html>
    <head>
        <meta charset='utf-8' />
        <meta name="description" content="JACK Audio Connection Kit | " />
        <link rel="stylesheet" type="text/css" media="screen" href="/jackaudio.github.com/assets/css/style.css">
        <link rel="alternate" type="application/atom+xml" href="/jackaudio.github.com/atom.xml" title="JACK Audio News">
        <title>Metadata | JACK Audio Connection Kit</title>
        <!-- Favicon Generator Icons -->
        <link rel="apple-touch-icon" sizes="180x180" href="/jackaudio.github.com/assets/icons/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/jackaudio.github.com/assets/icons/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/jackaudio.github.com/assets/icons/favicon-16x16.png">
        <link rel="manifest" href="/jackaudio.github.com/assets/icons/site.webmanifest">
        <link rel="shortcut icon" href="/jackaudio.github.com/assets/icons/favicon.ico">
        <meta name="msapplication-TileColor" content="#212121">
        <meta name="msapplication-config" content="/jackaudio.github.com/assets/icons/browserconfig.xml">
        <meta name="theme-color" content="#212121">
    </head>
    <body>
        <!-- HEADER -->
        <div id="header_wrap" class="outer">
            <header class="inner">
                <a id="forkme_banner" href="https://github.com/jackaudio">View on GitHub</a>
                <a href="/jackaudio.github.com/">
                    <img src="/jackaudio.github.com/assets/images/logo.png"
                        alt="JACK Logo - Home" class="img-fluid">
                </a>
                <nav>
                    <a href="/jackaudio.github.com/"> Home </a> |
                    <a href="/jackaudio.github.com/news/"> News </a> |
                    <a href="/jackaudio.github.com/applications/"> Applications </a> |
                    <a href="/jackaudio.github.com/faq/"> FAQ </a> |
                    <a href="https://github.com/jackaudio/jackaudio.github.com/wiki"> WIKI </a> |
                    <a href="/jackaudio.github.com/api/"> API </a> |
                    <a href="/jackaudio.github.com/downloads/"> Downloads </a> |
                    <a href="/jackaudio.github.com/community/"> Community Network </a>
                </nav>
            </header>
        </div>
        <!-- MAIN CONTENT -->
        <div id="main_content_wrap" class="outer">
            <section id="main_content" class="inner">
                <h2 id="jack-metadata-api">JACK Metadata API</h2>
<p>A running instance of JACK involves three types of conceptual objects:</p>
<ul>
<li>Clients</li>
<li>Ports</li>
<li>Connections</li>
</ul>
<p>The rest of this tutorial refers <strong>ONLY</strong> to the first two - connections are not
currently covered by the metadata implementation
even though the API theoretically covers them.</p>
<p>Each of these objects is typically referred to by its name, which typically
provides some indication of what it is and/or what it could be used for.
But a single name is often not enough.
Consider a given pair of JACK ports. You may want to know that they correspond
to the first two channels of your audio interface.
You might also like a reminder that they are connected to to your speakers.
You might also want to somehow mark these two as the default ports that should
be used when making connections.
A single name cannot perform this sort of multi-faceted role,
but if we could add some additional data to each port,
which other things could look up, then the goal becomes a lot easier.</p>
<h1 id="uuids">UUIDs</h1>
<p>Before we can attach any additional data to an object, we must have a unique way
of referring to the object. The names of ports can be changed,
and JACK2 introduced the possibility of client name changes too.
So using names isn't adequate.</p>
<p>JACK1 now creates a UUID (Universally Unique Identifier) for all objects.
This identifier never changes during the object's existence,
and is thus suitable for using when attaching additional data to the object.
These identifiers are created automatically, and you have no control over them.</p>
<h1 id="key-value-you-can-forget-type">Key/Value (you can forget Type)</h1>
<p>Just attaching a random piece of data to an object isn't very useful - nothing
will be able to do any kind of structured query to find out
if the data is present or not.</p>
<p>All metadata in JACK consists of a pair of strings. One of them, the &quot;key&quot;
identifies what type of information is represented by the other (the &quot;value&quot;).
This allows us to ask of each object &quot;Does this object have any value for <code>&lt;key&gt;</code>?&quot;
and get a meaningful answer.</p>
<p>The key part of a piece of metadata is just a string containing a URI.
The URI may or may not correspond to a URL - if it does,
then an <code>HTTP GET</code> request to the URL should retrieve something that explains
the meaning of the key and how to use it.
For example, <a href="/metadata/pretty-name/">http://jackaudio.org/metadata/pretty-name</a> is a URI that also
corresponds to a URL that describes what &quot;pretty-name&quot; data is and how to use it.</p>
<p>Both key and value are strings, but the value part could represent arbitrary
different kinds of data - a name, an image, audio, anything basically.
We therefore provide an optional third component to each piece of metadata - a
specification of the &quot;type&quot; of data represented by the value part.
If it is empty, then the value is assumed to be just a normal (null-terminated)
C string, useful for naming things in various ways.
The type can also be any MIME type or any URI. If find a piece of metadata with
a type that you cannot understand, you should ignore that metadata.</p>
<p>The <a href="https://jackaudio.org/api/group__Metadata.html">API documentation</a> should be consulted for more details.</p>
<h1 id="what-to-do-with-metadata">What to do with metadata?</h1>
<p>If we know the UUID of an object, we can do 3 things with metadata:</p>
<ol>
<li>Add, or &quot;define&quot;, a given piece of metadata for that UUID</li>
<li>Alter an existing piece of metadata for that UUID</li>
<li>Delete an existing piece of metadata for that UUID</li>
</ol>
<p>The man page for <code>jack_property</code> shows how to use that tool
to do any of these 3 tasks. Note that by default <code>jack_property</code> requires a UUID,
but you can pass it an additional argument to allow you
to use a port or client name instead of the UUID.</p>
<p>In addition to these three operations,
we might be interested in knowing about changes to metadata.
If so, a JACK client can register a &quot;property change callback&quot;,
which will be told about the UUID and key whenever a piece of metadata is created,
altered or deleted.
The API docs cover the details.</p>
<h1 id="who-does-what">Who does what?</h1>
<p>At this time, the metadata API is still quite new,
so there are not a lot of programs using it.
Most of the information that one might want in a metadata system is known only
to the user anyway, which means that existing JACK clients can't really define
much of it all by themselves.
Your DAW has no idea what your audio interface is connected to, or what the best
names to display for the first two channels are, or where the best places
to connect to in order to play audible material are.</p>
<p>However, <code>jack_property</code> can be used to do all these things
(note that &quot;all these things&quot; only involves creating metadata,
not actually using it for anything useful).</p>
<p>The script below shows a sample use of <code>jack_property</code> to define &quot;pretty-name&quot;
metadata for all ports (and the backend) of a JACK system running
on an RME HDSP device.</p>
<pre><code class="hljs language-bash"><span class="hljs-meta">#!/bin/sh
</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># set up nice names for all the ports</span>
<span class="hljs-comment">#</span>

<span class="hljs-keyword">for</span> n <span class="hljs-keyword">in</span> `seq 1 24` ; <span class="hljs-keyword">do</span>
    jack_property -p -s system:playback_<span class="hljs-variable">$n</span> http://jackaudio.org/metadata/pretty-name <span class="hljs-string">"ADAT <span class="hljs-variable">$n</span>"</span>
    jack_property -p -s system:capture_<span class="hljs-variable">$n</span> http://jackaudio.org/metadata/pretty-name <span class="hljs-string">"ADAT <span class="hljs-variable">$n</span>"</span>
<span class="hljs-keyword">done</span>
jack_property -p -s system:playback_25 http://jackaudio.org/metadata/pretty-name <span class="hljs-string">"S/PDIF L"</span>
jack_property -p -s system:capture_25 http://jackaudio.org/metadata/pretty-name <span class="hljs-string">"S/PDIF L"</span>
jack_property -p -s system:playback_26 http://jackaudio.org/metadata/pretty-name <span class="hljs-string">"S/PDIF R"</span>
jack_property -p -s system:capture_26 http://jackaudio.org/metadata/pretty-name <span class="hljs-string">"S/PDIF R"</span>

<span class="hljs-comment"># and now the driver itself</span>

jack_property -c -s system http://jackaudio.org/metadata/pretty-name <span class="hljs-string">"RME HDSP"</span>

<span class="hljs-built_in">exit</span> 0</code></pre>
<p>At the time of writing, <code>jack_property</code>, <code>patchage</code> and <code>qjackctl</code> allow
to display port + client &quot;pretty-names&quot; if the user chooses to do so (it falls
back to the current regular names if there is no metadata for a given object).</p>
<p><code>jack_lsp</code> can also be used to display port and client UUIDs - see the man page
for details.</p>            </section>
        </div>
<!-- FOOTER  -->
<div id="footer_wrap" class="outer">
    <footer class="inner">
        <p class="copyright" style="text-align:left">Slate theme maintained by
            <a href="https://github.com/pages-themes">pages-themes</a>
            <span style="float:right">This site is open source.
                <a href="https://github.com/jackaudio/jackaudio.github.com/edit/master/_pages/metadata/index.html.twig">
                Improve this page</a>
            </span>
        </p>
    </footer>
</div>
    </body>
</html>
